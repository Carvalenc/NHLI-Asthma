<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=kbffV7V9BIH3Ot2AQ2LQRA');.lst-kix_list_1-3>li:before{content:"\0025a0  "}.lst-kix_list_1-4>li:before{content:"\0025a0  "}ul.lst-kix_list_1-0{list-style-type:none}.lst-kix_list_1-7>li:before{content:"\0025a0  "}.lst-kix_list_1-5>li:before{content:"\0025a0  "}.lst-kix_list_1-6>li:before{content:"\0025a0  "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ul.lst-kix_list_1-3{list-style-type:none}.lst-kix_list_1-0>li:before{content:"\0025cf  "}ul.lst-kix_list_1-4{list-style-type:none}.lst-kix_list_1-8>li:before{content:"\0025a0  "}ul.lst-kix_list_1-1{list-style-type:none}ul.lst-kix_list_1-2{list-style-type:none}ul.lst-kix_list_1-7{list-style-type:none}.lst-kix_list_1-1>li:before{content:"\0025cb  "}.lst-kix_list_1-2>li:before{content:"\0025a0  "}ul.lst-kix_list_1-8{list-style-type:none}ul.lst-kix_list_1-5{list-style-type:none}ul.lst-kix_list_1-6{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c6{-webkit-text-decoration-skip:none;color:#0000ee;font-weight:700;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:24pt;font-family:"Arial";font-style:normal}.c10{-webkit-text-decoration-skip:none;color:#0000ee;font-weight:700;text-decoration:underline;text-decoration-skip-ink:none;font-size:24pt;font-style:normal}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Courier";font-style:normal}.c5{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Arial";font-style:normal}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c4{padding-top:11.2pt;padding-bottom:11.2pt;line-height:1.0;text-align:left;height:18pt}.c8{padding-top:12pt;padding-bottom:12pt;line-height:1.0;text-align:left}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c7{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c11{margin-left:30pt;padding-left:0pt}.c9{padding:0;margin:0}.c12{color:inherit;text-decoration:inherit}.c2{height:11pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Arial";line-height:1.0;page-break-after:avoid;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0;page-break-after:avoid;font-style:italic;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:12pt;color:#000000;font-weight:700;font-size:24pt;padding-bottom:12pt;font-family:"Arial";line-height:1.0;text-align:left}h2{padding-top:11.2pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:11.2pt;font-family:"Arial";line-height:1.0;text-align:left}h3{padding-top:12pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:12pt;font-family:"Arial";line-height:1.0;text-align:left}h4{padding-top:12.8pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:12.8pt;font-family:"Arial";line-height:1.0;text-align:left}h5{padding-top:12.8pt;color:#000000;font-weight:700;font-size:9pt;padding-bottom:12.8pt;font-family:"Arial";line-height:1.0;text-align:left}h6{padding-top:18pt;color:#000000;font-weight:700;font-size:8pt;padding-bottom:18pt;font-family:"Arial";line-height:1.0;text-align:left}</style></head><body class="c7"><h1 class="c8"><span class="c10"><a class="c12" href="#id.gjdgxs">CVD cohort assessment April 6, 2022</a></span></h1><p class="c0"><span class="c3">. clear <br><br>. clear matrix<br><br>. clear mata<br><br>. macro drop all <br><br>. <br>. global data &quot;/data/master/DS169/share/CARLOS/&quot;<br><br>. global othercodes &quot;/data/master/DS169/share/Codelists/Other codes/&quot;<br><br>. global codes &quot;/data/master/DS169/share/Codelists/&quot;<br><br>. global chloe &quot;/data/master/DS169/share/CHLOE/CVD/&quot;<br><br></span></p><hr><p class="c0"><span class="c1">**# (1) create medcode file for the unexposed</span></p><hr><p class="c0"><span class="c3">*use ${data}getmatchedcohort_matched_cohort_AURUM_final_UnexposedOnly, clear<br><br>*keep patid index <br>*merge 1:m patid using ${data}Unexposed_AURUM_MEDCODES, keep(master match) nogen<br></span></p><p class="c0"><span class="c3">. use ${chloe}UnexposedMedcodes, clear<br><br>. <br>. describe <br><br>Contains data from /data/master/DS169/share/CHLOE/CVD/UnexposedMedcodes.d<br>&gt; ta<br> Observations: &nbsp; &nbsp;63,793,969 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;Variables: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 Apr 2022 13:54<br>-------------------------------------------------------------------------<br>Variable &nbsp; &nbsp; &nbsp;Storage &nbsp; Display &nbsp; &nbsp;Value<br> &nbsp; &nbsp;name &nbsp; &nbsp; &nbsp; &nbsp; type &nbsp; &nbsp;format &nbsp; &nbsp;label &nbsp; &nbsp; &nbsp;Variable label<br>-------------------------------------------------------------------------<br>patid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; double &nbsp;%10.0g &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>index_match &nbsp; &nbsp; float &nbsp; %td &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>medcodeid &nbsp; &nbsp; &nbsp; str17 &nbsp; %17s &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br>obsdate &nbsp; &nbsp; &nbsp; &nbsp; float &nbsp; %td &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>-------------------------------------------------------------------------<br>Sorted by: <br><br>. <br></span></p><hr><ul class="c9 lst-kix_list_1-0 start"><li class="c0 c11 li-bullet-0"><span class="c1">(2) make each comorbidity variable</span></li></ul><hr><p class="c0 c2"><span class="c1"></span></p><p class="c0 c2"><span class="c3"></span></p><p class="c0"><span class="c3">****************************</span></p><p class="c0"><span class="c3">****** ATOPY *************<br>****************************<br></span></p><p class="c0"><span class="c3">Merge in atopy codes<br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcode using &quot;/data/master/DS169/share/Codelists/Other codes</span></p><p class="c0"><span class="c1">/Atopy_aurum.dta&quot;, keep(master match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,700,752<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,700,752 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;93,217 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">only keep codes if occur before the index date (ie call them missing if after the index date)</span></p><p class="c0"><span class="c1">. replace atopy=. if obs&gt;index</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(30,452 real changes made, 30,452 to missing)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">create variable that is 1 for every row of that patient if there is a 1 ever for that patientdo this using the &lsquo;max&rsquo; command to keep the maximum value</span></p><p class="c0"><span class="c1">(1) for each row of that patient</span></p><p class="c0"><span class="c1">. bysort patid: egen atop=max(atopy)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(45,201,993 missing values generated)</span></p><p class="c0"><span class="c1">drop the previous atopy variable as now only want the new variable generated by the max</span></p><p class="c0"><span class="c1">command</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">At the bottom of this dofile can then drop the medocde and the obsdate variables and if drop</span></p><p class="c0"><span class="c1">all duplicates are left wtih 1 row by patient and a 1 for each patient that had that atopy code at least once before the index date</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop atopy</span></p><p class="c0"><span class="c1">check the percentage</span></p><p class="c0"><span class="c1">. codebook patid</span></p><hr><h2 class="c4"><span class="c5"></span></h2><p class="c0"><span class="c1">Patid</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type: Numeric (double)<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Range: [3620018,2.961e+12] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Units: 1<br> &nbsp; &nbsp; Unique values: 578,250 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Missing .: 0/63,793,969<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Mean: 1.4e+12<br> &nbsp; &nbsp; &nbsp; &nbsp; Std. dev.: 8.3e+11<br><br> &nbsp; &nbsp; &nbsp; Percentiles: &nbsp; &nbsp; 10% &nbsp; &nbsp; &nbsp; 25% &nbsp; &nbsp; &nbsp; 50% &nbsp; &nbsp; &nbsp; 75% &nbsp; &nbsp; &nbsp; 90%<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.6e+11 &nbsp; 7.1e+11 &nbsp; 1.4e+12 &nbsp; 2.1e+12 &nbsp; 2.6e+12<br></span></p><p class="c0"><span class="c1">. codebook patid if atop==1</span></p><hr><h2 class="c4"><span class="c5"></span></h2><p class="c0"><span class="c1">Patid</span></p><p class="c0"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type: Numeric (double)<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Range: [57720018,2.960e+12] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Units: 1<br> &nbsp; &nbsp; Unique values: 23,770 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Missing .: 0/18,591,976<br><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Mean: 1.4e+12<br> &nbsp; &nbsp; &nbsp; &nbsp; Std. dev.: 8.5e+11<br><br> &nbsp; &nbsp; &nbsp; Percentiles: &nbsp; &nbsp; 10% &nbsp; &nbsp; &nbsp; 25% &nbsp; &nbsp; &nbsp; 50% &nbsp; &nbsp; &nbsp; 75% &nbsp; &nbsp; &nbsp; 90%<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.4e+11 &nbsp; 6.5e+11 &nbsp; 1.4e+12 &nbsp; 2.1e+12 &nbsp; 2.6e+12<br></span></p><p class="c0"><span class="c3">******************************************************************<br>******************************** DIABETES &nbsp;***********************<br>******************************************************************<br></span></p><p class="c0"><span class="c1">. * merge in diabetes codes</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. merge m:1 medcode using ${codes}dmmedcodes.dta, keep(master match) noge</span></p><p class="c0"><span class="c1">n</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,675,808<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,675,808 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 118,161 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace diabetes=. if obs&gt;index</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(75,340 real changes made, 75,340 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen diabete=max(diabetes)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(56,928,225 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop diabetes</span></p><p class="c0"><span class="c3">*******************************************************<br>******** CARDIAC DISEASE EXCEPT HEART FAILURE &nbsp;********<br>********************************************************</span></p><p class="c0 c2"><span class="c3"></span></p><p class="c0"><span class="c1">. merge m:1 medcode using &quot;/data/master/DS169/share/Codelists/Other codes</span></p><p class="c0"><span class="c1">/Heart_except_heartfailure.dta&quot;, keep(master match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,412,158<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,412,158 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 381,811 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. * for each cardiac disease only want to know if the code is before the</span></p><p class="c0"><span class="c1">index date</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace ihd=. if obs&gt;index</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(42,906 real changes made, 42,906 to missing)</span></p><p class="c0"><span class="c1">. replace rhy=. if obs&gt;index</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(20,241 real changes made, 20,241 to missing)</span></p><p class="c0"><span class="c1">. replace hyper=. if obs&gt;index</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(159,491 real changes made, 159,491 to missing)</span></p><p class="c0"><span class="c1">. replace other=. if obs&gt;index</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(2,377 real changes made, 2,377 to missing)</span></p><p class="c0"><span class="c3">Generate a cardiac variable that covers all the conditions as &lt;br&gt; are going to drop these patients<br><br></span></p><p class="c0"><span class="c1">. gen any_cardiac=1 if ihd==1 | rhy==1 | hyper==1 | other==1</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(63,637,173 missing values generated)</span></p><p class="c0"><span class="c1">. bysort patid: egen cardiac=max(any_cardiac)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(43,692,816 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop term ihd rhythm hypertension other_cardiac any_cardiac</span></p><p class="c0"><span class="c3">***********************************<br>******** PNEUMONIA &nbsp; **************<br>************************************<br></span></p><p class="c0"><span class="c1">. merge m:1 medcode using &quot;/data/master/DS169/share/Codelists/Other codes</span></p><p class="c0"><span class="c1">/Pneumonia_aurum.dta&quot;, keep(master match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,788,908<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,788,908 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5,061 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace cap=. if obsdate&gt;index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(2,642 real changes made, 2,642 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen cp=max(cap)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(62,061,018 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop term cap</span></p><p class="c0 c2"><span class="c3"></span></p><p class="c0"><span class="c3">*******************************************<br>**Stroke/Cardiovascular events in unexposed &nbsp; &nbsp;<br>********************************************<br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcode using &quot;/data/master/DS169/share/Codelists/Other codes</span></p><p class="c0"><span class="c1">/CVA_aurum.dta&quot;, keep(master match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,783,467<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,783,467 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10,502 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace cva=. if obsdate&gt;index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(6,993 real changes made, 6,993 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen cv=max(cva)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(62,518,123 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop cva</span></p><p class="c0 c2"><span class="c3"></span></p><p class="c0"><span class="c3">***Chronic liver disease<br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcode using &quot;/home/cvalenci/Documents/DS169/share/Codelists</span></p><p class="c0"><span class="c1">/Other codes/Liver_aurum.dta&quot;, keep(master match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,765,895<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,765,895 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28,074 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace cld=. if obsdate&gt; index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(10,901 real changes made, 10,901 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen chrlv=max(cld)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(53,737,066 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop cld</span></p><p class="c0"><span class="c3">***Depression <br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcode using &quot;/home/cvalenci/Documents/DS169/share/Codelists</span></p><p class="c0"><span class="c1">/Depression.dta&quot;, keep(master match) nogen</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(variable term was str60, now str82 to accommodate using data&rsquo;s values)</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,629,551<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,629,551 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 164,418 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace depression=. if obsdate&gt; index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(66,837 real changes made, 66,837 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen dpr=max(depression)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(51,974,078 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop depression term</span></p><p class="c0"><span class="c3">***<br>**Kidney failure <br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcodeid using ${data}hyperlipid_medcodes050422.dta, keep(ma</span></p><p class="c0"><span class="c1">ster match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,748,310<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,748,310 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;45,659 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace hyperlipidemia=. if obsdate&gt; index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(24,155 real changes made, 24,155 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen hyprlip=max(hyperlipidemia)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(54,186,193 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop hyperlipidemia snomedctdescriptionid snomedctconceptid term cleans</span></p><p class="c0"><span class="c1">edreadcode originalreadcode observations</span></p><p class="c0"><span class="c3">****<br>**Chronic Kidney failure <br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcodeid using &quot;/home/cvalenci/Documents/DS169/share/Codelis</span></p><p class="c0"><span class="c1">ts/Other codes/KidneyFailure_aurum.dta&quot;, keep(master match) nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,765,563<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,765,563 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28,406 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace crf=. if obsdate&gt; index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(20,481 real changes made, 20,481 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen chk = max(crf)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(60,060,934 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop crf term</span></p><p class="c0"><span class="c3">***<br>**Heart failure <br><br></span></p><p class="c0"><span class="c1">. merge m:1 medcodeid using ${codes}HeartFailure.dta, keep(master match)</span></p><p class="c0"><span class="c1">nogen</span></p><p class="c0"><span class="c3">Result &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number of obs<br>-----------------------------------------<br>Not matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,782,015<br> &nbsp; &nbsp;from master &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63,782,015 &nbsp;<br> &nbsp; &nbsp;from using &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;<br><br>Matched &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;11,954 &nbsp;<br>-----------------------------------------<br></span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. replace HF=. if obsdate &gt;index_match</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(9,222 real changes made, 9,222 to missing)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. bysort patid: egen hrtf= max(HF)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(62,601,094 missing values generated)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. drop term HF</span></p><p class="c0"><span class="c3"><br><br>Using data from CPRD Aurum and Gold.<br><br><br><br><br>*****************************************************************************************************<br>* (3) once have created each variable can drop the medcodes and dates and drop duplicates<br>*****************************************************************************************************<br><br></span></p><p class="c0"><span class="c1">. drop medcodeid obsdate</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. duplicates drop</span></p><p class="c0"><span class="c1">Duplicates in terms of all variables</span></p><p class="c0"><span class="c1">(63,215,719 observations deleted)</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. * tidy up dataset</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. rename atop atopy</span></p><p class="c0"><span class="c1">. rename diabete diabetes</span></p><p class="c0"><span class="c1">. rename cardiac cardiac_conditions</span></p><p class="c0"><span class="c1">. rename cp pneumonia</span></p><p class="c0"><span class="c1">. rename cv stroke</span></p><p class="c0"><span class="c1">. rename chrlv liverfailure</span></p><p class="c0"><span class="c1">. rename dpr depression</span></p><p class="c0"><span class="c1">. rename hyprlip hyperlipidemia</span></p><p class="c0"><span class="c1">. rename chk kidneydisease</span></p><p class="c0"><span class="c1">. rename hrtf heartfailure</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. local miss cardiac_conditions pneumonia stroke atop liverfailure depres</span></p><p class="c0"><span class="c1">sion hyperlipidemia kidneydisease heartfailure</span></p><p class="c0"><span class="c1">.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">. foreach var of local miss {</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">2. replace var&#39;=0 ifvar&rsquo;==.</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">3. }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(564,179 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(576,557 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(577,383 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(554,480 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(570,685 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(566,386 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(571,664 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(576,074 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">(577,592 real changes made)</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c3">. tab atopy <br><br> &nbsp; &nbsp; &nbsp;atopy | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;554,480 &nbsp; &nbsp; &nbsp; 95.89 &nbsp; &nbsp; &nbsp; 95.89<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; 23,770 &nbsp; &nbsp; &nbsp; &nbsp;4.11 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab diabetes <br><br> &nbsp; diabetes | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp;3,512 &nbsp; &nbsp; &nbsp;100.00 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp; &nbsp;3,512 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab cardiac_conditions<br><br>cardiac_con |<br> &nbsp; &nbsp;ditions | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;564,179 &nbsp; &nbsp; &nbsp; 97.57 &nbsp; &nbsp; &nbsp; 97.57<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; 14,071 &nbsp; &nbsp; &nbsp; &nbsp;2.43 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab pneumonia<br><br> &nbsp;pneumonia | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;576,557 &nbsp; &nbsp; &nbsp; 99.71 &nbsp; &nbsp; &nbsp; 99.71<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp;1,693 &nbsp; &nbsp; &nbsp; &nbsp;0.29 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab stroke<br><br> &nbsp; &nbsp; stroke | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;577,383 &nbsp; &nbsp; &nbsp; 99.85 &nbsp; &nbsp; &nbsp; 99.85<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp; &nbsp;867 &nbsp; &nbsp; &nbsp; &nbsp;0.15 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab liverfailure<br><br>liverfailur |<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;570,685 &nbsp; &nbsp; &nbsp; 98.69 &nbsp; &nbsp; &nbsp; 98.69<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp;7,565 &nbsp; &nbsp; &nbsp; &nbsp;1.31 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab depression<br><br> depression | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;566,386 &nbsp; &nbsp; &nbsp; 97.95 &nbsp; &nbsp; &nbsp; 97.95<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; 11,864 &nbsp; &nbsp; &nbsp; &nbsp;2.05 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab hyperlipidemia<br><br>hyperlipide |<br> &nbsp; &nbsp; &nbsp; &nbsp;mia | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;571,664 &nbsp; &nbsp; &nbsp; 98.86 &nbsp; &nbsp; &nbsp; 98.86<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp;6,586 &nbsp; &nbsp; &nbsp; &nbsp;1.14 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab kidneydisease<br><br>kidneydisea |<br> &nbsp; &nbsp; &nbsp; &nbsp; se | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;576,074 &nbsp; &nbsp; &nbsp; 99.62 &nbsp; &nbsp; &nbsp; 99.62<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp;2,176 &nbsp; &nbsp; &nbsp; &nbsp;0.38 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br>. tab heartfailure<br><br>heartfailur |<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e | &nbsp; &nbsp; &nbsp;Freq. &nbsp; &nbsp; Percent &nbsp; &nbsp; &nbsp; &nbsp;Cum.<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 | &nbsp; &nbsp;577,592 &nbsp; &nbsp; &nbsp; 99.89 &nbsp; &nbsp; &nbsp; 99.89<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 | &nbsp; &nbsp; &nbsp; &nbsp;658 &nbsp; &nbsp; &nbsp; &nbsp;0.11 &nbsp; &nbsp; &nbsp;100.00<br>------------+-----------------------------------<br> &nbsp; &nbsp; &nbsp;Total | &nbsp; &nbsp;578,250 &nbsp; &nbsp; &nbsp;100.00<br><br></span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0 c2"><span class="c3"><br><br></span></p></body></html>